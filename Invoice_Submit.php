<?$SQLArray = $_POST['SQLArray'];$InvoiceCount = 0;// Connect to MYOB DSNtry {	$MYOBDatabase = new PDO("odbc:Driver={MYOAU1001}; Database=MYOBDevelopment; ");	$MYOBDatabase->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);	$MYOBDatabase->beginTransaction();	echo "Connected to MYOB successfully.\n";} catch (Exception $e) {	die("Unable to connect to MYOB: " . $e->getMessage());}foreach ($SQLArray as $SQLString) {	$MYOBDatabase->exec($SQLString);}// Submit invoices to MYOBtry {	$MYOBDatabase->commit();	echo "Invoice successfully submitted.\n";} catch (Exception $e) {	echo "Import failed: ". $e->getMessage(); }$InvoiceNumbersArray = array();// Get amount of invoices submitted and return appropriate invoice numbersforeach($SQLArray as $value) {	echo "\n";	if($value != "END TRANSACTION") {		$InvoiceCount++;		if (preg_match_all("/Job #[0-9]+/", $value, $match)) {			$flat = array_shift($match);			$InvoiceNumbersArray[] = json_encode($flat);		}	}}$InvoiceNumbersArray = str_replace("Job #", "", $InvoiceNumbersArray);echo "\n";print_r($InvoiceNumbersArray);echo "\nLast invoices are...\n";$MYOBQuery = "SELECT TOP ". $InvoiceCount ." * FROM Sales ORDER BY InvoiceNumber DESC";$Result = $MYOBDatabase->query($MYOBQuery);foreach($Result as $row) {	echo $row['InvoiceNumber'] ."\n";}?>