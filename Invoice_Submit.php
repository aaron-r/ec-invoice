<?$SQLArray = $_POST['SQLArray'];$InvoiceCount = 0;// Connect to MYOB DSNtry {	$MYOBDatabase = new PDO("odbc:Driver={MYOAU1001}; Database=MYOBDevelopment; ");	$MYOBDatabase->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);	$MYOBDatabase->beginTransaction();	echo "Connected to MYOB successfully.\n";} catch (Exception $e) {	die("Unable to connect to MYOB: " . $e->getMessage());}foreach ($SQLArray as $SQLString) {	$MYOBDatabase->exec($SQLString);}// Submit invoices to MYOBtry {	$MYOBDatabase->commit();	echo "Invoice successfully submitted.\n";} catch (Exception $e) {	echo "Import failed: ". $e->getMessage(); }$InvoiceNumberArray = array();// Get amount of invoices submitted and return appropriate invoice numbersforeach($SQLArray as $SQLContent) {	if($SQLContent != "END TRANSACTION") {		$InvoiceCount++;		if (preg_match_all("/Job #[0-9]+/", $SQLContent, $match)) {			$flat = array_shift($match);			$InvoiceNumberArray[] = json_encode($flat);		}	}}$InvoiceNumberArray = str_replace("Job #", "", $InvoiceNumberArray);$InvoiceNumberAmount = count($InvoiceNumberArray);$MYOBQuery = "SELECT TOP ". $InvoiceCount ." * FROM Sales ORDER BY InvoiceNumber DESC";$Result = $MYOBDatabase->query($MYOBQuery);$c = 1;$ReturnInvoiceNumber = array();// Sort job numbers and invoice numbers respectivelyforeach($Result as $row) {	$DecodedInvoiceArray = json_decode($InvoiceNumberArray[$InvoiceNumberAmount - $c]);	$c++;		foreach($DecodedInvoiceArray as $JobNumber) {		echo $JobNumber . " => " . $row['InvoiceNumber'] ."\n";		$ReturnInvoiceNumber[] = array($JobNumber => $row['InvoiceNumber']);	}}print_r($ReturnInvoiceNumber);?>